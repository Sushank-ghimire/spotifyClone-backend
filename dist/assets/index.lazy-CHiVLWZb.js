import{c as h,j as e,U as O,u as T,r,B as u,w as P,i as V,T as H,x as $,y as S,z as D,b as I,D as w,E as y,F as A,G as z,H as F,J as k,I as j,K as B,M as G,N as J,O as K,P as L,Q as C,R as M,V as U,L as Q,_ as f,v as E,d as W,s as X}from"./index-CjmrAWQN.js";import{L as Z,M as R,U as ee,a as se}from"./users-OSJVqt-t.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=h("Album",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=h("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=h("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=h("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=h("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]),ne=()=>e.jsxs("nav",{className:"flex md:px-8 justify-between items-center w-full h-fit p-2 md:p-4",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(Z,{to:"/",children:e.jsx("img",{className:"md:size-10 size-6",src:"./spotify.png",alt:"Logo"})}),e.jsxs("div",{className:"flex flex-col text-zinc-400",children:[e.jsx("h1",{className:"xl:text-2xl md:text-lg truncate font-bold text-white",children:"Admin Music Manager"}),e.jsx("p",{className:"text-sm",children:"Manage your musics"})]})]}),e.jsx(O,{})]}),re=()=>{const{fetchStats:s,statsData:l,isLoading:a}=T();return r.useEffect(()=>{s()},[s]),e.jsx("section",{className:"w-[90vw] mx-auto gap-4 grid grid-cols-2 md:grid-cols-4 items-center",children:a?Array(4).map((o,x)=>e.jsx(ce,{},x)):e.jsxs(e.Fragment,{children:[e.jsx(v,{color:"green",Icon:le,title:"Total Albums",stat:l==null?void 0:l.totalAlbums}),e.jsx(v,{Icon:R,title:"Total Songs",color:"indigo",stat:l==null?void 0:l.totalSongs}),e.jsx(v,{color:"red",Icon:ee,title:"Total Artists",stat:l==null?void 0:l.uniqueArtists[0].count}),e.jsx(v,{color:"blue",Icon:ae,title:"Total Users",stat:l==null?void 0:l.totalUsers})]})})},v=({title:s,stat:l,Icon:a,color:o})=>{const x={green:"text-green-600",indigo:"text-indigo-600",red:"text-red-600",blue:"text-blue-600",yellow:"text-yellow-600"}[o]||"text-gray-600";return e.jsxs("div",{className:"w-full px-3 md:py-4 py-3 rounded-md bg-zinc-900 flex justify-start gap-2 md:gap-3 items-center",children:[e.jsxs(u,{variant:"ghost",className:P("size-6 font-bold p-4 hover:opacity-80",x,`hover:${x}`),children:[e.jsx(a,{})," "]}),e.jsxs("div",{children:[e.jsx("h1",{className:"md:font-bold font-normal text-sm md:text-md truncate",children:s}),e.jsx("p",{children:l})]})]})},ce=()=>e.jsxs("div",{className:"w-full px-3 py-2 rounded-md bg-zinc-900 flex justify-start gap-2 md:gap-3 items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-700 animate-pulse shrink-0"}),e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx("div",{className:"w-2/3 h-4 bg-zinc-700 rounded-md animate-pulse"}),e.jsx("div",{className:"w-1/3 h-3 bg-zinc-700 rounded-md animate-pulse"})]})]}),de=()=>{const{getUsers:s,users:l}=V();return r.useEffect(()=>{s()},[s]),e.jsxs("section",{className:"flex justify-between w-[99vw] md:w-[90vw] mx-auto rounded p-3 bg-zinc-900 flex-col gap-4 mt-3",children:[e.jsxs("h1",{className:"flex gap-3 text-xl md:text-2xl items-center font-bold",children:["All users ",e.jsx(ie,{className:"text-green-500"})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full p-4",children:[e.jsxs("div",{className:"grid mx-auto grid-cols-3 w-full items-center font-bold",children:[e.jsx("div",{className:"w-full min-w-1/3 flex-grow text-center",children:"Full Name"}),e.jsx("div",{className:"w-full min-w-1/3 flex-grow text-center",children:"Email"}),e.jsx("div",{className:"w-full min-w-1/3 flex-grow text-center",children:"CreatedAt"})]}),e.jsx("div",{className:"flex flex-col",children:l&&l.map(a=>e.jsx(oe,{user:a},a._id))})]})]})},oe=({user:s})=>e.jsxs("div",{className:"grid mx-auto last:border-b hover:bg-white/5 py-3 p-2 transition-all grid-cols-3 cursor-pointer w-full items-center border-t border-zinc-800",children:[e.jsxs("div",{className:"flex w-full gap-3 items-center justify-center",children:[e.jsx("img",{className:"size-8 rounded-md object-cover",src:s.profileUrl,alt:s.userFullName}),e.jsx("p",{className:"w-1/3 text-left truncate",children:s.userFullName})]}),e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx("p",{className:"text-left w-1/2 font-medium",children:s.email})}),e.jsx("div",{className:"flex w-full gap-1 items-center truncate justify-center",children:s.createdAt.split("T")[0]})]}),me=()=>e.jsx("div",{className:"w-[90vw] mx-auto p-2 rounded",children:e.jsxs(H,{defaultValue:"songs",className:"w-[400px]",children:[e.jsxs($,{children:[e.jsx(S,{value:"songs",children:"Songs"}),e.jsx(S,{value:"albums",children:"Albums"}),e.jsx(S,{value:"users",children:"Users"})]}),e.jsx(D,{value:"songs",children:e.jsx(ue,{})}),e.jsx(D,{value:"albums",children:e.jsx(fe,{})}),e.jsx(D,{value:"users",children:e.jsx(de,{})})]})}),xe=()=>{const[s,l]=r.useState(!1),[a,o]=r.useState(!1),{albums:x,fetchAlbums:d}=I();r.useEffect(()=>{d()},[]);const[i,m]=r.useState({title:"",artist:"",duration:0,album:""}),[c,g]=r.useState({audioFile:null,imageFile:null}),b=r.useRef(null),n=r.useRef(null),N=async()=>{o(!0);try{if(!c.audioFile||!c.imageFile)return f.error("Image and audio both files are required.");const t=new FormData;t.append("title",i.title),t.append("artist",i.artist),i.album!=="none"&&i.album&&t.append("albumId",i.album),t.append("duration",i.duration.toString()),t.append("imageFile",c.imageFile),t.append("audioFile",c.audioFile);const{data:p}=await E.post("/admin/songs/create",i,{headers:{"Content-Type":"multipart/form-data"}});p.status===201&&(m({album:"",title:"",duration:0,artist:""}),g({audioFile:null,imageFile:null}))}catch(t){t instanceof Error&&f.error(t.message||"Error while adding song"),f.error("Error while adding song")}};return e.jsxs(w,{open:s,onOpenChange:l,children:[e.jsx(y,{children:e.jsxs(u,{className:"text-white",children:[e.jsx(Y,{className:"font-bold"})," Add songs"]})}),e.jsxs(A,{className:"bg-zinc-900 border-zinc-700 overflow-auto max-h-[70vh]",children:[e.jsxs(z,{children:[e.jsx(F,{children:"Add new song"}),e.jsx(k,{children:"Add a new song to your music library"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("input",{required:!0,className:"cursor-pointer",hidden:!0,onChange:t=>g(p=>({...p,audioFile:t.target.files[0]})),type:"file",ref:n,accept:"audio/*"}),e.jsx("input",{required:!0,className:"cursor-pointer",hidden:!0,onChange:t=>g(p=>({...p,imageFile:t.target.files[0]})),type:"file",ref:b,accept:"image/*"}),e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-zinc-700 rounded-lg cursor-pointer",onClick:()=>{var t;return(t=b.current)==null?void 0:t.click()},children:e.jsx("div",{className:"text-center",children:c.imageFile?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-emerald-500",children:"Image selected:"}),e.jsx("div",{className:"text-xs text-zinc-400",children:c.imageFile.name.slice(0,20)}),e.jsxs("div",{children:[Math.round(c.imageFile.size/1024)," kb"]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full inline-block mb-2",children:e.jsx(q,{className:"h-6 w-6 text-zinc-400"})}),e.jsx("div",{className:"text-sm text-zinc-400 mb-2",children:"Upload song image"}),e.jsx(u,{variant:"outline",size:"sm",className:"text-xs",children:"Choose File"})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Audio File"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(u,{variant:"outline",onClick:()=>{var t;return(t=n.current)==null?void 0:t.click()},className:"w-full",children:c.audioFile?e.jsxs("div",{className:"flex gap-2 flex-col",children:[c.audioFile.name.slice(0,20),e.jsxs("span",{children:[Math.round(c.audioFile.size/1024)," kb"]})]}):"Choose Audio File"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Title"}),e.jsx(j,{required:!0,value:i.title,onChange:t=>m({...i,title:t.target.value}),className:"bg-zinc-800 border-zinc-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Artist"}),e.jsx(j,{required:!0,value:i.artist,onChange:t=>m({...i,artist:t.target.value}),className:"bg-zinc-800 border-zinc-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Duration"}),e.jsx(j,{required:!0,value:i.duration,min:0,type:"number",onChange:t=>m({...i,duration:parseInt(t.target.value)||0}),className:"bg-zinc-800 border-zinc-700 appearance-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Album (Optional)"}),e.jsxs(B,{value:i.album,onValueChange:t=>m({...i,album:t}),children:[e.jsx(G,{className:"bg-zinc-800 border-zinc-700",children:e.jsx(J,{placeholder:"Select album"})}),e.jsxs(K,{className:"bg-zinc-800 border-zinc-700",children:[e.jsx(L,{value:"none",children:"No Album (Single)"}),x.map(t=>e.jsx(L,{value:t._id,children:t.title},t._id))]})]})]})]}),e.jsxs(C,{children:[e.jsx(M,{onClick:()=>l(!1),children:"Cancel"}),e.jsx(U,{disabled:a||!c.audioFile||!c.imageFile||!i.album||!i.artist||!i.title||!i.duration,type:"submit",onClick:N,className:"text-white",children:a?e.jsx(Q,{className:"text-white animate-spin size-4"}):"Add Song"})]})]})]})},ue=()=>{const{fetchAllSongs:s,allSongs:l}=T(),{deleteSong:a}=I();return r.useEffect(()=>{s()},[s]),e.jsxs("div",{className:"flex justify-normal items-center w-[99vw] md:w-[90vw] mx-auto rounded p-3 bg-zinc-900 flex-col gap-4 mt-3",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2 items-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-netween",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(R,{className:"size-4 text-green-600"}),e.jsx("h1",{className:"text-lg text-white font-medium",children:"Songs Library"})]}),e.jsx("p",{className:"text-zinc-400 md:pl-8",children:"manage your music tracks"})]}),e.jsx(xe,{})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full p-4",children:[e.jsxs("div",{className:"grid mx-auto grid-cols-4 w-full items-center font-bold",children:[e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Title"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Artist"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Released Date"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Action"})]}),e.jsx("div",{className:"flex flex-col",children:l.length>0&&l.map(o=>e.jsx(he,{deleteSong:a,song:o},o._id))})]})]})},he=({song:s,deleteSong:l})=>{var a;return e.jsxs("div",{className:"grid mx-auto last:border-b hover:bg-white/5 py-3 p-2 transition-all grid-cols-4 cursor-pointer w-full items-center border-t border-zinc-800",children:[e.jsxs("div",{className:"flex w-full gap-3 items-center justify-center",children:[e.jsx("img",{className:"size-8 rounded-md object-cover",src:s.imageUrl,alt:s.title}),e.jsx("p",{className:"w-1/3 text-left truncate",children:s.title})]}),e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx("p",{className:"text-left w-1/2 font-medium",children:s.artist})}),e.jsxs("div",{className:"flex w-full gap-1 items-center justify-center",children:[e.jsx(te,{className:"size-4"})," ",(a=s.createdAt)==null?void 0:a.split("T")[0]]}),e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs(w,{children:[e.jsx(y,{children:e.jsx(_,{className:"text-red-500 hover:text-red-400 transition-all rounded-md size-6 cursor-pointer"})}),e.jsxs(A,{children:[e.jsxs(z,{children:[e.jsx(F,{children:"Do you really wanted to delete this song ?"}),e.jsx(k,{children:"This action cannot be undone. This will permanently delete this song and this songs data from the servers and database."})]}),e.jsxs(C,{children:[e.jsx(M,{children:"Cancel"}),e.jsx(U,{onClick:()=>{l(s._id)},className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})})]})},je=()=>{const[s,l]=r.useState(!1),[a,o]=r.useState(!1),x=r.useRef(null),[d,i]=r.useState({title:"",artist:"",releaseYear:new Date().getFullYear()}),[m,c]=r.useState(null),g=n=>{var t;const N=(t=n.target.files)==null?void 0:t[0];N&&c(N)},b=async()=>{o(!0);try{if(!m)return f.error("Please upload an image");const n=new FormData;n.append("title",d.title),n.append("artist",d.artist),n.append("releaseYear",d.releaseYear.toString()),n.append("imageFile",m),await E.post("/admin/albums",n,{headers:{"Content-Type":"multipart/form-data"}}),i({title:"",artist:"",releaseYear:new Date().getFullYear()}),c(null),l(!1),f.success("Album created successfully")}catch(n){f.error("Failed to create album: "+n.message)}finally{o(!1)}};return e.jsxs(w,{open:s,onOpenChange:l,children:[e.jsx(y,{asChild:!0,children:e.jsxs(u,{className:"text-white",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Add Album"]})}),e.jsxs(A,{className:"bg-zinc-900 border-zinc-700 h-[70vh] overflow-y-scroll",children:[e.jsxs(z,{children:[e.jsx(F,{children:"Add New Album"}),e.jsx(k,{children:"Add a new album to your collection"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("input",{type:"file",ref:x,onChange:g,accept:"image/*",className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-zinc-700 rounded-lg cursor-pointer",onClick:()=>{var n;return(n=x.current)==null?void 0:n.click()},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full inline-block mb-2",children:e.jsx(q,{className:"h-6 w-6 text-zinc-400"})}),e.jsx("div",{className:"text-sm text-zinc-400 mb-2",children:m?m.name:"Upload album artwork"}),e.jsx(u,{variant:"outline",size:"sm",className:"text-xs",children:"Choose File"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Album Title"}),e.jsx(j,{value:d.title,onChange:n=>i({...d,title:n.target.value}),className:"bg-zinc-800 border-zinc-700",placeholder:"Enter album title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Artist"}),e.jsx(j,{value:d.artist,onChange:n=>i({...d,artist:n.target.value}),className:"bg-zinc-800 border-zinc-700",placeholder:"Enter artist name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Release Year"}),e.jsx(j,{type:"number",value:d.releaseYear,onChange:n=>i({...d,releaseYear:parseInt(n.target.value)}),className:"bg-zinc-800 border-zinc-700",placeholder:"Enter release year",min:1900,max:new Date().getFullYear()})]})]}),e.jsxs(C,{children:[e.jsx(u,{variant:"outline",onClick:()=>l(!1),disabled:a,children:"Cancel"}),e.jsx(u,{onClick:b,disabled:a||!m||!d.title||!d.artist,children:a?"Creating...":"Add Album"})]})]})]})},fe=()=>{const{fetchAlbums:s,albums:l,deleteAlbum:a}=I();return r.useEffect(()=>{s()},[s]),e.jsxs("div",{className:"flex justify-normal items-center w-[99vw] md:w-[90vw] mx-auto rounded p-3 bg-zinc-900 flex-col gap-4 mt-3",children:[e.jsxs("div",{className:"flex w-full justify-between gap-2 items-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-netween",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(se,{className:"size-6 text-green-600"}),e.jsx("h1",{className:"text-lg text-white font-medium",children:"Albums Library"})]}),e.jsx("p",{className:"text-zinc-400 md:pl-8",children:"manage your albums collection"})]}),e.jsx(je,{})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full p-4",children:[e.jsxs("div",{className:"grid mx-auto grid-cols-4 w-full items-center font-bold",children:[e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Title"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Artist"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Songs"}),e.jsx("div",{className:"w-full min-w-1/4 flex-grow text-center",children:"Action"})]}),e.jsx("div",{className:"flex flex-col",children:l.map(o=>e.jsx(ge,{album:o,deleteAlbum:a}))})]})]})},ge=({album:s,deleteAlbum:l})=>{var a;return e.jsxs("div",{className:"grid mx-auto last:border-b hover:bg-white/5 py-3 p-2 transition-all grid-cols-4 cursor-pointer w-full items-center border-t border-zinc-800",children:[e.jsxs("div",{className:"flex w-full gap-3 items-center justify-center",children:[e.jsx("img",{className:"size-8 rounded-md object-cover",src:s.imageUrl,alt:s.title}),e.jsx("p",{className:"w-1/3 text-left truncate",children:s.title})]}),e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx("p",{className:"text-left w-1/2 font-medium",children:s.artist})}),e.jsx("div",{className:"flex w-full gap-1 items-center justify-center",children:(a=s.songs)==null?void 0:a.length}),e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs(w,{children:[e.jsx(y,{children:e.jsx(_,{className:"text-red-500 hover:text-red-400 transition-all rounded-md size-6 cursor-pointer"})}),e.jsxs(A,{children:[e.jsxs(z,{children:[e.jsx(F,{children:"Do you really wanted to delete this album ?"}),e.jsx(k,{children:"This action cannot be undone. This will permanently delete this album and this songs data from the servers and database."})]}),e.jsxs(C,{children:[e.jsx(M,{children:"Cancel"}),e.jsx(U,{onClick:()=>{l(s._id)},className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})})]})},ve=W("/admin/")({component:pe});function pe(){const{isAdmin:s,fetchAdmin:l}=T(),a=X();return r.useEffect(()=>{s||a({to:"/"})},[s,l]),s?e.jsxs("div",{className:"min-h-screen overflow-x-hidden flex flex-col gap-4 w-screen bg-indigo-800/5",children:[e.jsx(ne,{}),e.jsx(re,{}),e.jsx(me,{})]}):null}export{ve as Route};
